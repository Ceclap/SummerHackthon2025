<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContaSfera - –í–∞—à —É–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏–∏</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/notifications.js') }}"></script>
</head>
<body>
    <!-- Theme Switcher Dropdown -->
    <div style="position: fixed; top: 20px; right: 20px; z-index: 1001;">
        <select id="themeSelect" class="theme-select" title="–í—ã–±—Ä–∞—Ç—å —Ç–µ–º—É">
            <option value="dark">üåô –¢—ë–º–Ω–∞—è</option>
            <option value="light">‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è</option>
            <option value="blue">üíß –°–∏–Ω—è—è</option>
        </select>
    </div>

    <div class="landing-container">
        <!-- Animated Particles -->
        <div class="particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>

        <header class="landing-header">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <a href="/">ContaSfera</a>
            </div>
            <nav class="landing-nav">
                <a href="#classify">{{ _('–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è') }}</a>
                <a href="#convert">{{ _('–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä') }}</a>
                <a href="#check">{{ _('–ü—Ä–æ–≤–µ—Ä–∫–∞') }}</a>
                <a href="#assistant">{{ _('–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç') }}</a>
                <a href="{{ url_for('archive') }}">{{ _('–ê—Ä—Ö–∏–≤') }}</a>
            </nav>
            <div class="auth-buttons">
                <a href="#classify" class="btn btn-primary">
                    <i class="fas fa-upload"></i>
                    {{ _('–ù–∞—á–∞—Ç—å') }}
                </a>
                <a href="#dashboard" class="btn btn-secondary">
                    <i class="fas fa-sign-in-alt"></i>
                    {{ _('–í–æ–π—Ç–∏') }}
                </a>
            </div>
        </header>

        <main class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">
                    ContaSfera
                    <span style="font-size: 0.6em; display: block; margin-top: 10px; color: var(--text-secondary);">
                        –£–º–Ω–∞—è –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –¥–ª—è –ú–æ–ª–¥–æ–≤—ã
                    </span>
                </h1>
                <p class="hero-subtitle">
                    –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∏–π —É—á–µ—Ç —Å –ø–æ–º–æ—â—å—é –ò–ò. –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø–æ–ª—É—á–∞–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã –∏ —ç–∫–æ–Ω–æ–º—å—Ç–µ –≤—Ä–µ–º—è.
                </p>
                <div class="hero-buttons">
                    <a href="#classify" class="btn btn-primary">
                        <i class="fas fa-rocket"></i>
                        {{ _('–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ') }}
                    </a>
                    <a href="#dashboard" class="btn btn-secondary">
                        <i class="fas fa-play"></i>
                        {{ _('–î–µ–º–æ') }}
                    </a>
                </div>
            </div>
        </main>
    </div>

    <!-- Smooth transition section -->
    <div class="dashboard-section">
        <div id="dashboard" class="dashboard-container">
            <div class="sidebar">
                <div class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span>ContaSfera</span>
                </div>
                <nav class="sidebar-nav">
                    <a href="#dashboard" class="nav-item active">
                        <i class="fas fa-tachometer-alt"></i>
                        {{ _('–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è') }}
                    </a>
                    <a href="{{ url_for('incarcare') }}" class="nav-item">
                        <i class="fas fa-upload"></i>
                        {{ _('–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç') }}
                    </a>
                    <a href="{{ url_for('tipuri_de_documente') }}" class="nav-item">
                        <i class="fas fa-folder"></i>
                        {{ _('–ú–æ–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã') }}
                    </a>
                    
                    <div class="nav-section">{{ _('–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã') }}</div>
                    <a href="#" class="nav-item">
                        <i class="fas fa-chart-bar"></i>
                        {{ _('–ê–Ω–∞–ª–∏—Ç–∏–∫–∞') }}
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-file-alt"></i>
                        {{ _('–û—Ç—á–µ—Ç—ã') }}
                    </a>
                    
                    <div class="nav-section">{{ _('–ù–∞—Å—Ç—Ä–æ–π–∫–∏') }}</div>
                    <a href="#" class="nav-item">
                        <i class="fas fa-cog"></i>
                        {{ _('–ü—Ä–æ—Ñ–∏–ª—å') }}
                    </a>
                    <a href="#" class="nav-item">
                        <i class="fas fa-question-circle"></i>
                        {{ _('–ü–æ–º–æ—â—å') }}
                    </a>
                </nav>
            </div>

            <div class="main-content">
                <div class="content-header">
                    <h1>{{ _('–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è') }}</h1>
                    <p>{{ _('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ContaSfera') }}</p>
                </div>

                <section id="assistant" class="card">
                    <h2 class="card-title">{{ _('–ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ –∑–∞–∫–æ–Ω—É –ú–æ–ª–¥–æ–≤—ã –∏ —Å–∞–π—Ç—É') }}</h2>
                    <div class="ai-assistant">
                         <form id="ai-form" class="ai-form">
                            <div class="input-group">
                                <textarea id="ai-question" placeholder="{{ _('–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å...') }}" rows="2" style="width:100%"></textarea>
                                <button type="submit" class="btn btn-primary ai-submit-btn">{{ _('–°–ø—Ä–æ—Å–∏—Ç—å') }}</button>
                            </div>
                        </form>
                        <div id="ai-response-container" style="display: none;">
                            <div id="ai-response"></div>
                        </div>
                    </div>
                </section>

                <section id="classify" class="card">
                    <h2 class="card-title">{{ _('–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞') }}</h2>
                    <form id="classify-form" enctype="multipart/form-data" class="feature-form">
                        <div class="file-input-wrapper">
                           <input type="file" name="file" id="classify-file" class="file-input" accept="image/*,application/pdf" required>
                           <label for="classify-file" class="btn btn-secondary"><i class="fas fa-upload"></i> {{ _('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª') }}</label>
                           <span class="file-name">{{ _('–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω') }}</span>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ _('–ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å') }}</button>
                    </form>
                    <div id="classify-result"></div>
                </section>
            
                <section id="convert" class="card">
                    <h2 class="card-title">{{ _('–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —Ñ–æ—Ç–æ/—Å–∫–∞–Ω–∞ –≤ Excel') }}</h2>
                    <form id="convert-form" enctype="multipart/form-data" class="feature-form">
                        <div class="file-input-wrapper">
                            <input type="file" name="file" id="convert-file" class="file-input" accept="image/*,application/pdf" required>
                            <label for="convert-file" class="btn btn-secondary"><i class="fas fa-upload"></i> {{ _('–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª') }}</label>
                            <span class="file-name">{{ _('–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω') }}</span>
                        </div>
                        <button type="submit" class="btn btn-primary">{{ _('–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å') }}</button>
                    </form>
                    <div id="convert-result"></div>
                    <a id="download-excel" href="#" style="display:none;" class="btn btn-success">{{ _('–°–∫–∞—á–∞—Ç—å Excel') }}</a>
                </section>
            
                <section id="check" class="card">
                    <h2 class="card-title">{{ _('–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞') }}</h2>
                    <form id="check-form" class="feature-form">
                        <textarea id="check-json" placeholder="{{ _('–í—Å—Ç–∞–≤—å—Ç–µ JSON —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏') }}" rows="5" class="form-input"></textarea>
                        <button id="check-btn" class="btn btn-primary">{{ _('–ü—Ä–æ–≤–µ—Ä–∏—Ç—å') }}</button>
                    </form>
                    <div id="check-result"></div>
                </section>

                <!-- Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">1,247</div>
                        <div class="stat-label">{{ _('–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤') }}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">98.5%</div>
                        <div class="stat-label">{{ _('–¢–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è') }}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">24—á</div>
                        <div class="stat-label">{{ _('–í—Ä–µ–º—è —ç–∫–æ–Ω–æ–º–∏–∏') }}</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">‚Çº 15,420</div>
                        <div class="stat-label">{{ _('–≠–∫–æ–Ω–æ–º–∏—è –≤ –º–µ—Å—è—Ü') }}</div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="card">
                        <h3>{{ _('–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –Ω–µ–¥–µ–ª—é') }}</h3>
                        <div class="chart-container">
                            <canvas id="activityChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                    <div class="card">
                        <h3>{{ _('–¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤') }}</h3>
                        <div class="chart-container">
                            <canvas id="docTypesChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Recent Documents -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">{{ _('–ù–µ–¥–∞–≤–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã') }}</h3>
                        <div class="card-actions">
                            <div class="search-box">
                                <input type="text" id="docSearch" placeholder="{{ _('–ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...') }}" class="form-input">
                                <i class="fas fa-search search-icon"></i>
                            </div>
                            <select id="docFilter" class="form-input">
                                <option value="">{{ _('–í—Å–µ —Ç–∏–ø—ã') }}</option>
                                <option value="FF">{{ _('–§–∞–∫—Ç—É—Ä–∞ –§–∏—Å–∫–∞–ª—ç') }}</option>
                                <option value="BF">{{ _('–ë–æ–Ω –§–∏—Å–∫–∞–ª') }}</option>
                                <option value="other">{{ _('–î—Ä—É–≥–∏–µ') }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="docs-grid" id="docsGrid">
                        {% if recent_documents %}
                            {% for doc in recent_documents %}
                            <div class="doc-item" data-type="{{ doc.document_type or 'other' }}" data-name="{{ doc.filename.lower() }}">
                                <div class="doc-icon">
                                    <i class="fas fa-file-alt"></i>
                                </div>
                                <div class="doc-info">
                                    <div class="doc-name">{{ doc.filename }}</div>
                                    <div class="doc-meta">
                                        {% if doc.document_type %}
                                            <span class="doc-type">{{ doc.document_type }}</span>
                                        {% endif %}
                                        {% if doc.document_number %}
                                            <span class="doc-number">‚Ññ{{ doc.document_number }}</span>
                                        {% endif %}
                                        {% if doc.document_date %}
                                            <span class="doc-date">{{ doc.document_date }}</span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="doc-actions">
                                    <button class="btn btn-primary btn-sm" onclick="viewDocument('{{ doc.filename }}')" title="{{ _('–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å') }}">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-secondary btn-sm" onclick="downloadDocument('{{ doc.filename }}')" title="{{ _('–°–∫–∞—á–∞—Ç—å') }}">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="empty-state">
                                <i class="fas fa-inbox" style="font-size: 3rem; color: var(--text-muted);"></i>
                                <p>{{ _('–ù–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤') }}</p>
                                <a href="{{ url_for('incarcare') }}" class="btn btn-primary">
                                    {{ _('–ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç') }}
                                </a>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Document Modal -->
    <div id="documentModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">{{ _('–î–µ—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞') }}</h2>
            <div id="modalBody">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        // Theme select functionality
        const themeSelect = document.getElementById('themeSelect');
        const body = document.body;

        const currentTheme = localStorage.getItem('theme') || 'dark';
        body.setAttribute('data-theme', currentTheme);
        themeSelect.value = currentTheme;
        
        themeSelect.addEventListener('change', (e) => {
            const newTheme = e.target.value;
            body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });
        
        // File input name display
        document.querySelectorAll('.file-input').forEach(input => {
            input.addEventListener('change', function() {
                const fileName = this.files[0] ? this.files[0].name : '{{ _('–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω') }}';
                this.closest('.file-input-wrapper').querySelector('.file-name').textContent = fileName;
            });
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Parallax effect for particles
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const particles = document.querySelectorAll('.particle');
            
            particles.forEach((particle, index) => {
                const speed = 0.5 + (index * 0.1);
                particle.style.transform = `translateY(${scrolled * speed}px)`;
            });
        });

        // AI Chat functionality
        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            input.value = '';

            // Show loading
            const loadingId = addLoadingMessage();

            // Send to backend
            fetch('/ask_ai', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ message: message })
            })
            .then(response => response.json())
            .then(data => {
                removeLoadingMessage(loadingId);
                addMessage(data.response, 'ai');
            })
            .catch(error => {
                removeLoadingMessage(loadingId);
                addMessage('–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.', 'ai');
            });
        }

        function addMessage(content, type) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = content;
            
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addLoadingMessage() {
            const chatMessages = document.getElementById('chatMessages');
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'message ai-message loading';
            loadingDiv.id = 'loading-' + Date.now();
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –ü–µ—á–∞—Ç–∞–µ—Ç...';
            
            loadingDiv.appendChild(contentDiv);
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            return loadingDiv.id;
        }

        function removeLoadingMessage(id) {
            const loadingElement = document.getElementById(id);
            if (loadingElement) {
                loadingElement.remove();
            }
        }

        // Enter key support for chat
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html> 