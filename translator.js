const translations = {
    ro: {
        // Sidebar
        menu_dashboard: 'Dashboard',
        menu_section_functii: 'Funcții',
        menu_upload: 'Încărcare și Recunoaștere',
        menu_validate: 'Validare și Editare',
        menu_archive: 'Arhiva Documentelor',
        menu_reports: 'Rapoarte și Analiză',
        menu_section_data: 'Data',
        menu_doctypes: 'Tipuri de documente',
        menu_contacts: 'Informații de contact',
        menu_invoices: 'Balanța facturilor',
        menu_section_pages: 'Pagini',
        menu_profile: 'Formular de profil',
        menu_calendar: 'Calendar',
        menu_faq: 'Întrebări frecvente',
        menu_section_charts: 'Grafice',
        menu_barchart: 'Diagramă cu bare',
        menu_piechart: 'Diagramă circulară',
        menu_linechart: 'Diagramă liniară',
        menu_home: 'Acasă',
        sidebar_title: 'CONTASFERA',
        sidebar_subtitle: 'Advanced Analytics',

        // Header
        download_reports: 'DESCĂRCAȚI RAPOARTE',

        // Dashboard Page
        dashboard_title: 'DASHBOARD',
        dashboard_welcome: 'Bun venit la panoul dvs. de control',
        ai_placeholder: 'Întrebați asistentul nostru AI orice despre contabilitatea dvs....',
        card_revenue_generated: 'Venituri Generate',
        card_recent_docs: 'Documente Recente',
        card_campaign: 'Campanie',
        card_campaign_revenue: 'MDL 230,000.00 venituri generate',
        card_campaign_info: 'Include cheltuieli și costuri diverse suplimentare',
        card_sales_qty: 'Cantitatea de vânzări',
        cat_servicii: 'Servicii',
        cat_marfuri: 'Mărfuri',
        cat_consultanta: 'Consultanță',
        cat_chirii: 'Chirii',
        cat_altele: 'Altele',

        // Documents Page
        doctypes_title: 'Tipuri de documente',
        doctypes_subtitle: 'Prezentare generală a tuturor categoriilor',
        doc_facturi: 'Facturi Fiscale',
        doc_facturi_desc: 'Emitere, primire și gestiune',
        doc_contracte: 'Contracte',
        doc_contracte_desc: 'Contracte de muncă, prestări servicii',
        doc_avize: 'Avize de Însoțire',
        doc_avize_desc: 'Însoțirea mărfurilor și activelor',
        doc_cec: 'Cecuri',
        doc_cec_desc: 'Bancare, de călătorie, etc.',
        doc_bonuri: 'Bonuri Fiscale',
        doc_bonuri_desc: 'Dovada achizițiilor cu amănuntul',
        doc_rapoarte: 'Rapoarte de Casă',
        doc_rapoarte_desc: 'Înregistrarea zilnică a numerarului',
        doc_extrase: 'Extrase Bancare',
        doc_extrase_desc: 'Istoricul tranzacțiilor bancare',
        doc_procese: 'Procese Verbale',
        doc_procese_desc: 'Predare-primire, casare, etc.',
        modal_title: 'Lista de Documente',

        // Upload Page
        upload_title: 'Încărcare și Recunoaștere',
        upload_subtitle: 'Trageți sau selectați fișierele pentru analiză AI',
        upload_drop_text: 'Trageți fișierele aici sau <span class="browse-link">căutați pe computer</span>',
        upload_formats: 'Formate suportate: PDF, PNG, JPG, CSV, XLSX, TXT, JSON',
        col_filename: 'Nume fișier',
        col_type: 'Tip Detectat',
        col_status: 'Status',
        type_detecting: 'Detectare...',
        status_processing: 'Procesare...',
        status_success: 'Succes',
        doc_unknown: 'Necunoscut',

        // Validate Page
        validate_title: 'Validare și Editare',
        validate_subtitle: 'Verificați și confirmați documentele recunoscute de AI',
        col_val_filename: 'Nume Fișier',
        col_val_detected: 'Tip Detectat',
        col_val_status: 'Status',
        col_val_actions: 'Acțiuni',
        status_pending: 'Așteptare',
        status_validated: 'Validat',
        action_validate: 'Validare',
        action_edit: 'Editare',
        action_delete: 'Ștergere',
        modal_edit_title: 'Editați Tipul Documentului',
        modal_edit_filename_label: 'Nume Fișier:',
        modal_edit_select_label: 'Selectați tipul corect:',
        modal_edit_save_btn: 'Salvați Modificările',

        // Chart
        legend_income: 'Venituri',
        legend_expenses: 'Cheltuieli',
        card_total_revenue_label: 'Venituri Generate',

        // Financial Analysis Page
        menu_financial_analysis: 'Analiză Financiară',
        financial_analysis_title: 'Analiză Financiară',
        financial_analysis_subtitle: 'Detalii despre venituri și cheltuieli',
        placeholder_title: 'Pagină în construcție',
        placeholder_text: 'Această secțiune este în curs de dezvoltare. Aici vor fi afișate rapoarte financiare detaliate.',

        // Profile Page
        profile_title: 'Profil Utilizator',
        profile_subtitle: 'Vizualizați și editați informațiile dvs. personale',
        profile_edit_btn: 'Editare',
        profile_save_btn: 'Salvare',
        profile_firstname: 'Nume',
        profile_lastname: 'Prenume',
        profile_status: 'Statut în companie',
        profile_company: 'Numele Companiei',
    },
    ru: {
        // Sidebar
        menu_dashboard: 'Дашборд',
        menu_section_functii: 'Функции',
        menu_upload: 'Загрузка и Распознавание',
        menu_validate: 'Валидация и Редактирование',
        menu_archive: 'Архив Документов',
        menu_reports: 'Отчеты и Аналитика',
        menu_section_data: 'Данные',
        menu_doctypes: 'Типы документов',
        menu_contacts: 'Контактная информация',
        menu_invoices: 'Баланс счетов',
        menu_section_pages: 'Страницы',
        menu_profile: 'Форма профиля',
        menu_calendar: 'Календарь',
        menu_faq: 'Часто задаваемые вопросы',
        menu_section_charts: 'Графики',
        menu_barchart: 'Гистограмма',
        menu_piechart: 'Круговая диаграмма',
        menu_linechart: 'Линейный график',
        menu_home: 'Главная',
        sidebar_title: 'CONTASFERA',
        sidebar_subtitle: 'Расширенная аналитика',

        // Header
        download_reports: 'СКАЧАТЬ ОТЧЕТЫ',
        
        // Dashboard Page
        dashboard_title: 'ПАНЕЛЬ УПРАВЛЕНИЯ',
        dashboard_welcome: 'Добро пожаловать в вашу панель управления',
        ai_placeholder: 'Спросите нашего ИИ-ассистента что-угодно о вашем учете...',
        card_revenue_generated: 'Полученный доход',
        card_recent_docs: 'Недавние документы',
        card_campaign: 'Кампания',
        card_campaign_revenue: 'MDL 230,000.00 полученный доход',
        card_campaign_info: 'Включает дополнительные разные расходы и издержки',
        card_sales_qty: 'Количество продаж',
        cat_servicii: 'Услуги',
        cat_marfuri: 'Товары',
        cat_consultanta: 'Консультации',
        cat_chirii: 'Аренда',
        cat_altele: 'Другое',

        // Documents Page
        doctypes_title: 'Типы документов',
        doctypes_subtitle: 'Обзор всех категорий',
        doc_facturi: 'Налоговые накладные',
        doc_facturi_desc: 'Выдача, получение и управление',
        doc_contracte: 'Контракты',
        doc_contracte_desc: 'Трудовые договоры, оказание услуг',
        doc_avize: 'Накладные',
        doc_avize_desc: 'Сопровождение товаров и активов',
        doc_cec: 'Чеки',
        doc_cec_desc: 'Банковские, дорожные и т.д.',
        doc_bonuri: 'Кассовые чеки',
        doc_bonuri_desc: 'Подтверждение розничных покупок',
        doc_rapoarte: 'Кассовые отчеты',
        doc_rapoarte_desc: 'Ежедневный учет наличности',
        doc_extrase: 'Банковские выписки',
        doc_extrase_desc: 'История банковских транзакций',
        doc_procese: 'Акты',
        doc_procese_desc: 'Приема-передачи, списания и т.д.',
        modal_title: 'Список документов',

        // Upload Page
        upload_title: 'Загрузка и Распознавание',
        upload_subtitle: 'Перетащите или выберите файлы для анализа ИИ',
        upload_drop_text: 'Перетащите файлы сюда или <span class="browse-link">выберите на компьютере</span>',
        upload_formats: 'Поддерживаемые форматы: PDF, PNG, JPG, CSV, XLSX, TXT, JSON',
        col_filename: 'Имя файла',
        col_type: 'Определенный тип',
        col_status: 'Статус',
        type_detecting: 'Определение...',
        status_processing: 'Обработка...',
        status_success: 'Успешно',
        doc_unknown: 'Неизвестный',

        // Validate Page
        validate_title: 'Валидация и Редактирование',
        validate_subtitle: 'Проверьте и подтвердите документы, распознанные ИИ',
        col_val_filename: 'Имя файла',
        col_val_detected: 'Определенный тип',
        col_val_status: 'Статус',
        col_val_actions: 'Действия',
        status_pending: 'Ожидает',
        status_validated: 'Проверено',
        action_validate: 'Проверить',
        action_edit: 'Изменить',
        action_delete: 'Удалить',
        modal_edit_title: 'Изменить тип документа',
        modal_edit_filename_label: 'Имя файла:',
        modal_edit_select_label: 'Выберите правильный тип:',
        modal_edit_save_btn: 'Сохранить изменения',

        // Chart
        legend_income: 'Доходы',
        legend_expenses: 'Расходы',
        card_total_revenue_label: 'Полученный доход',
        
        // Financial Analysis Page
        menu_financial_analysis: 'Финансовый анализ',
        financial_analysis_title: 'Финансовый анализ',
        financial_analysis_subtitle: 'Детализация доходов и расходов',
        placeholder_title: 'Страница в разработке',
        placeholder_text: 'Этот раздел находится в разработке. Здесь будут отображаться подробные финансовые отчеты.',

        // Profile Page
        profile_title: 'Профиль пользователя',
        profile_subtitle: 'Просматривайте и редактируйте вашу личную информацию',
        profile_edit_btn: 'Редактировать',
        profile_save_btn: 'Сохранить',
        profile_firstname: 'Имя',
        profile_lastname: 'Фамилия',
        profile_status: 'Должность в компании',
        profile_company: 'Название компании',
    }
};

const setLanguage = (lang) => {
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'INPUT' && element.type === 'text') {
                element.placeholder = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });
    document.documentElement.lang = lang;
    localStorage.setItem('language', lang);
    const langBtn = document.getElementById('lang-toggle-btn');
    if (langBtn) {
        langBtn.textContent = lang.toUpperCase();
    }
    // Redraw charts with new language
    if (typeof drawAllCharts === 'function') {
        const theme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
        drawAllCharts(theme);
    }
};

const toggleLanguage = () => {
    const currentLang = localStorage.getItem('language') || 'ro';
    const newLang = currentLang === 'ro' ? 'ru' : 'ro';
    setLanguage(newLang);
};

document.addEventListener('DOMContentLoaded', () => {
    const langToggleBtn = document.getElementById('lang-toggle-btn');
    if (langToggleBtn) {
        langToggleBtn.addEventListener('click', toggleLanguage);
    }

    const savedLang = localStorage.getItem('language') || 'ro';
    setLanguage(savedLang);
}); 